# Googleフォーム デプロイ完全ガイド

## 📋 必要なもの
- Googleアカウント
- Google Drive へのアクセス
- 約10分の作業時間

## 🚀 デプロイ手順

### 方法1: Google Apps Script を使った自動作成（推奨）

#### ステップ1: Google Apps Script を開く
1. **Google Drive** を開く: https://drive.google.com
2. 左上の「**新規**」ボタンをクリック
3. 「**その他**」→「**Google Apps Script**」を選択
   - もし表示されない場合：「その他」→「アプリを追加」→「Google Apps Script」を検索して追加

#### ステップ2: スクリプトをコピー
1. 新しく開いたスクリプトエディタで、既存のコード（`function myFunction()...`）を全て削除
2. `create-google-form.gs` ファイルの内容を**全てコピー**して貼り付け
3. ファイル名を「フォーム作成スクリプト」などに変更（任意）

#### ステップ3: スクリプトを実行
1. 上部のツールバーから「**実行**」ボタンをクリック
2. 関数選択で「**createConsultationForm**」が選ばれていることを確認
3. 初回実行時は権限の承認が必要：
   - 「承認が必要です」→「権限を確認」
   - Googleアカウントを選択
   - 「詳細」→「フォーム作成スクリプト（安全ではないページ）に移動」
   - 「許可」をクリック

#### ステップ4: 作成結果を確認
1. 実行ログ（画面下部）に以下が表示されます：
   ```
   フォームが作成されました！
   公開URL: https://docs.google.com/forms/...
   埋め込み用URL: https://docs.google.com/forms/d/e/...
   ```
2. **埋め込み用URL**をコピー

#### ステップ5: サイトに設定
1. `/app/contact/page.tsx` ファイルの11行目を更新：
   ```typescript
   // 変更前
   const googleFormUrl = "https://forms.gle/YOUR_FORM_ID_HERE";
   
   // 変更後（コピーしたURLに置き換え）
   const googleFormUrl = "https://docs.google.com/forms/d/e/実際のフォームID/viewform";
   ```

---

### 方法2: 手動でフォームを作成

#### ステップ1: Googleフォームを開く
1. https://forms.google.com にアクセス
2. 「空白」のフォームを選択

#### ステップ2: フォーム基本設定
1. **タイトル**: みらいの学び場 - 無料相談申込フォーム
2. **説明**: 不登校でお悩みの保護者様へ。まずはお気軽にご相談ください。48時間以内にご連絡いたします。

#### ステップ3: 質問を追加
以下の質問を順番に追加：

1. **保護者様のお名前** (短文回答・必須)
2. **お子様の学年** (ラジオボタン・必須)
   - 小学1年生〜6年生、中学1年生〜3年生、高校生、その他
3. **お子様の現在の状況** (段落・必須)
4. **ご相談内容** (段落・必須)
5. **電話番号** (短文回答・任意)
6. **希望連絡方法** (ラジオボタン・必須)
   - メール、電話、どちらでも可
7. **希望相談日時** (段落・任意)
8. **その他・ご要望** (段落・任意)

#### ステップ4: フォーム設定
1. 右上の「⚙️設定」をクリック
2. **一般**タブ：
   - ✅ メールアドレスを収集
   - ✅ 回答のコピーを回答者に送信「常に表示」
3. **プレゼンテーション**タブ：
   - ✅ 進行状況バーを表示
   - 確認メッセージ：お申し込みありがとうございました。48時間以内にご連絡いたします。

#### ステップ5: 埋め込みURLを取得
1. 右上の「送信」ボタンをクリック
2. 「<>」アイコン（HTMLを埋め込む）を選択
3. 表示されたiframeコードから、src="..." の中のURLをコピー

---

## 🔧 トラブルシューティング

### Q: Google Apps Script が見つからない
**A:** Google Workspace の管理者設定で無効になっている可能性があります。手動作成（方法2）をお試しください。

### Q: 権限承認で「安全ではないページ」と表示される
**A:** これは自作スクリプトのため表示される警告です。自分で作成したスクリプトなので安全です。「詳細」→「移動」で進めてください。

### Q: フォームが表示されない
**A:** 以下を確認してください：
1. URLが正しくコピーされているか
2. フォームの共有設定が「リンクを知っている全員」になっているか
3. ブラウザの広告ブロッカーが影響していないか

### Q: 自動返信メールが送られない
**A:** Google Apps Script で以下を確認：
1. トリガーが正しく設定されているか（トリガーアイコンから確認）
2. GmailApp の権限が許可されているか
3. メールアドレスが正しく入力されているか

---

## 📝 作成後の確認事項

### 必須確認
- [ ] フォームが正しく表示される
- [ ] 全ての質問項目が設定されている
- [ ] 必須/任意の設定が正しい
- [ ] テスト送信ができる
- [ ] 回答がスプレッドシートに記録される
- [ ] 確認メールが届く

### 推奨設定
- [ ] 回答の通知設定（新しい回答時にメール通知）
- [ ] スプレッドシートのバックアップ設定
- [ ] 定期的な回答データのエクスポート

---

## 💡 運用のコツ

1. **定期的なバックアップ**
   - 月1回、スプレッドシートをダウンロード
   - Google Drive でバックアップフォルダを作成

2. **回答の管理**
   - スプレッドシートで「対応済み」列を追加
   - 色分けで対応状況を管理

3. **プライバシー保護**
   - 3ヶ月以上経過した回答は削除を検討
   - スプレッドシートの共有設定に注意

---

## 📞 サポート

ご不明な点がありましたら、開発者までお問い合わせください。